"use strict";(self.webpackChunkmoobius_doc=self.webpackChunkmoobius_doc||[]).push([[726],{7458:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>h});var i=t(4848),s=t(8453);const a={id:"CustomChannelService"},o=void 0,r={id:"tutorial-basics/CustomChannelService",title:"CustomChannelService",description:"A Moobius Channel could be boring, but you can make it wonderful as a developer by customizing the behavior of a Channel created by you with a Service program, aka Custom Channel Service (CCS). Basically, a CCS is the mastermind behind a Channel, which controls every aspect of what a User sees in a Channel and what will happen when a User interacts with a Channel. Before we dive deeply into the specifics of how to write code to program a CCS, we may take a glimpse at how CCS works in general.",source:"@site/versioned_docs/version-1.0.0/tutorial-basics/CustomChannelService.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/CustomChannelService",permalink:"/moobius/1.0.0/tutorial-basics/CustomChannelService",draft:!1,unlisted:!1,editUrl:"https://github.com/groupultra/moobius/edit/main/versioned_docs/version-1.0.0/tutorial-basics/CustomChannelService.md",tags:[],version:"1.0.0",lastUpdatedBy:"hangyi",lastUpdatedAt:1722931899e3,frontMatter:{id:"CustomChannelService"},sidebar:"docs",previous:{title:"Getting Started",permalink:"/moobius/1.0.0/tutorial-basics/GettingStarted"},next:{title:"Preparation",permalink:"/moobius/1.0.0/tutorial-basics/Preparation"}},l={},h=[{value:"Note:",id:"note",level:3},{value:"Take Home Message",id:"take-home-message",level:2}];function c(e){const n={blockquote:"blockquote",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"A Moobius Channel could be boring, but you can make it wonderful as a developer by customizing the behavior of a Channel created by you with a Service program, aka Custom Channel Service (CCS). Basically, a CCS is the mastermind behind a Channel, which controls every aspect of what a User sees in a Channel and what will happen when a User interacts with a Channel. Before we dive deeply into the specifics of how to write code to program a CCS, we may take a glimpse at how CCS works in general."}),"\n",(0,i.jsx)(n.p,{children:"A CCS is a computer program that establishes network connections to the Moobius Platform, which can be run either on your laptop or a cloud server (no public IP address required). When a User makes an interaction with a Channel (such as sending a Message or clicking a Button), the data containing the full description of the interaction is sent from the User's client (frontend) to the Moobius Platform as an Event. In the case where the Channel is taken over by a CCS, the Event will be dispatched (forwarded) to the corresponding CCS, and CCS could, at its own discretion (business logic), handle the Event in an arbitrary way. Trivially, if the CCS does nothing, then nothing would happen to the Users (the Message will not be received by any User). In a typical use case, the CCS will then send an Event to the Moobius Platform as an instruction to make modifications to some Users' clients, like displaying a Message, displaying something on their Canvas, or refreshing the Button list."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"css",src:t(2636).A+"",width:"1280",height:"708"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:'The Event sent from a User\'s client to the Moobius Platform and forwarded to a CCS is called an Upward Event. An Upward Event represents "what a User does" in a Channel, including:'}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A User sends a Message (message_up)"}),"\n",(0,i.jsx)(n.li,{children:"A User clicks a Button (button_click)"}),"\n",(0,i.jsx)(n.li,{children:"A User clicks a Context Menu item (context_menu_click)"}),"\n",(0,i.jsx)(n.li,{children:"A User joins the Channel (join_channel)"}),"\n",(0,i.jsx)(n.li,{children:"A User leaves a Channel (leave_channel)"}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:'The Event sent from a CCS as an instruction to the Moobius Platform and forwarded to a User\'s Client is called a Downward Event. A Downward Event represents "what a User sees" in a Channel (managed by CCS), including:'}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Display a Message (message_down)"}),"\n",(0,i.jsx)(n.li,{children:"Update text and/or image on Canvas (update_canvas)"}),"\n",(0,i.jsx)(n.li,{children:"Update the Button list (update_buttons)"}),"\n",(0,i.jsx)(n.li,{children:"Update the Context Menu items (update_context_menu)"}),"\n",(0,i.jsxs)(n.li,{children:["Update the Member list (update_characters)\n",(0,i.jsx)(n.img,{alt:"css",src:t(1111).A+"",width:"1280",height:"690"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"note",children:"Note:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'A CCS could communicate with the Moobius Platform to get the "ground truth" of all Users at any time. This is useful when the CCS is interrupted (Users may join and/or leave the Channel during the interval). Upward Events happening during the interruption will be lost so that sometimes it is critical for CCS to establish a mechanism to maintain the consistency of the GBA.'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"An Upward Event is sent directly from a User's client to the Moobius Platform and forwarded directly to the CCS, which results in a one-to-one information flow (Yes, even for message_up: the User's intended recipients is transferred as a data field of the Event, which does not imply that the Message would reach the recipients as intended; it is entirely up to the CCS)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'A Downward Event is sent from a CCS as an instruction for the Moobius Platform to send data to specific Users\' clients (which in most cases results in a modification of their UI display). Any Downward Event has a data field of recipients, which can be more than one User in the Channel, and this recipients field is guaranteed to be strictly observed by the Moobius Platform, which exhibits a one-to-many information flow (The recipients field would be removed when the Downward Event is forwarded from the Moobius Platform to User clients, so that any User would not know who else received the same Event). Since any Downward Event could target to any subset of the Users in the Channel, a Moobius Channel facilitates differentiated, or individualized experience, i.e. different User in the same Channel could see entirely different Messages, Buttons, Canvas and Character list. This is the most startling feature of Moobius compared to a "traditional" group chat application, which allows for enormous space of imagination and creativity.'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'It is worth mentioning that there is no required chronological or causal relationship between any Upward Event and any Downward Event. When a User receives a message_down, it does not imply that it is a direct result of some user sending a message_up, nor does it even imply someone sends a message_up previously at all. On the other hand, when a User sends a message_up, it does not imply that someone will receive a message_down (or any other Event). The timing and property of any specific Downward Event and its recipients are entirely up to the CCS, and the Upward Events is just "information input" for the CCS to use as a reference.'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"A Moobius GBA developer may need some time to fully grab the idea of the previous statements, and in the next Section we will elaborate some of the concepts with specific GBA examples. You may bookmark this for future reference. For now, the only thing you need to keep in mind is that a GBA is about the logic of Event processing. It is the responsibility of a CCS developer to process the Upward Events and utilize the toolkit of Downward Events to create great individualized experience for your Users."}),"\n",(0,i.jsx)(n.h2,{id:"take-home-message",children:"Take Home Message"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"A Custom Channel Service (CCS) is the core of a GBA, which allows for customization of individualized User experience."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"A CCS receives Upward Events indicating what Users do from Moobius, and sends out Downward Events to Moobius as instructions to control what Users see."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"A Moobius Channel with a CCS is substantially different from a common group chat, hence some mindset has to be changed to fully explore the power of CCS."}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},2636:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/img-1-903c1c212b602e82c5b19b980011c1d0.png"},1111:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/img-2-1e77d1fadcc62dba1bbcc24d3c540b94.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);